- job:
    block-downstream: false
    block-upstream: false
    builders:
    - shell: "set -e\n\nexport PRIVATE_KEY=$WORKSPACE/private/config/keys/id_rsa_perf\n\
        chmod 600 ${PRIVATE_KEY}\nexport OPTIONS=\"-o StrictHostKeyChecking=no\"\n\
        export KUBECONFIG=\"/root/.kube/config\"\n\n\nif [[ \"${USE_PROXY}\" == \"\
        true\" ]]; then\nssh ${OPTIONS} -o ProxyCommand=\"ssh -i ${PRIVATE_KEY} -W\
        \ %h:%p ${PROXY_USER}@${PROXY_HOST}\" -i ${PRIVATE_KEY} ${USER}@${JUMP_HOST}\
        \ 'bash -s' <<ENDSSH\nsudo su -\noc login -u system:admin\nif [[ -d \"/root/scale-cd-jobs\"\
        \ ]]; then\nrm -rf /root/scale-cd-jobs\nfi\ngit clone https://github.com/chaitanyaenr/scale-cd-jobs.git\
        \ /root/scale-cd-jobs\ncd /root/scale-cd-jobs/build-scripts\n./mastervert.sh\
        \ $SETUP_PBENCH $CONTAINERIZED $CLEAR_RESULTS $MOVE_RESULTS $TOOLING_INVENTORY\
        \ $FIRST_RUN_PROJECTS $SECOND_RUN_PROJECTS $THIRD_RUN_PROJECTS\nexit\nENDSSH\n\
        else\nssh ${OPTIONS} -i ${PRIVATE_KEY} ${USER}@${JUMP_HOST} 'bash -s'<<ENDSSH\n\
        if [[ -d \"/root/scale-cd-jobs\" ]]; then\nrm -rf /root/scale-cd-jobs\nfi\n\
        git clone https://github.com/chaitanyaenr/scale-cd-jobs.git /root/scale-cd-jobs\n\
        cd /root/scale-cd-jobs/build-scripts\n./mastervert.sh $SETUP_PBENCH $CONTAINERIZED\
        \ $CLEAR_RESULTS $MOVE_RESULTS $TOOLING_INVENTORY $FIRST_RUN_PROJECTS $SECOND_RUN_PROJECTS\
        \ $THIRD_RUN_PROJECTS\nexit\nENDSSH\nfi\n\n#test_rc=$(ssh -o StrictHostKeyChecking=no\
        \ -i $WORKSPACE/private/config/keys/id_rsa_perf root@${JUMP_HOST} 'cat /tmp/test_status'\
        \ )\n#if [[ \"$test_rc\" != 0 ]]; then\n#\techo \"mastervertical test failed\"\
        \n#\texit 1\n#fi\nexit 0\n\n"
    concurrent: false
    description: This job runs mastervertical on openshift. This job depends on https://xxxxxxxxxxxxxx/view/System%20Verification%20Test/job/SETUP-TOOLING/
      to setup pbench both containerized and non containerized.
    disabled: false
    name: !!python/unicode 'mastervertical'
    parameters:
    - string:
        default: ''
        description: "The jump host needs to have the inventory used to install openshift\
          \ and kube config.\t\t\t\t\t\t "
        name: JUMP_HOST
    - string:
        default: root
        description: The user to use when sshing to the JUMP_HOST.
        name: USER
    - bool:
        default: false
        description: Use the ProxyCommand to access the OpenShift masters, jump host
          on private networks in the lab.
        name: USE_PROXY
    - string:
        default: stack
        description: The name to use in the ssh ProxyCommand.
        name: PROXY_USER
    - string:
        default: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
        description: The server to use in the ssh ProxyCommand.
        name: PROXY_HOST
    - bool:
        default: false
        description: When enabled will register tools using pbench-ansible
        name: SETUP_PBENCH
    - string:
        default: /root/tooling_inventory
        description: path to the inventory generated by openshift_labeler.
        name: TOOLING_INVENTORY
    - bool:
        default: false
        description: When set to true will clear the pbench results, make sure the
          results are saved before enabling this option.
        name: CLEAR_RESULTS
    - bool:
        default: false
        description: when enabled will move the results to the server.
        name: MOVE_RESULTS
    - bool:
        default: false
        description: when enabled will run containerized pbench.
        name: CONTAINERIZED
    - string:
        default: '1000'
        description: ''
        name: FIRST_RUN_PROJECTS
    - string:
        default: '2000'
        description: ''
        name: SECOND_RUN_PROJECTS
    - string:
        default: '3000'
        description: ''
        name: THIRD_RUN_PROJECTS
    project-type: freestyle
    properties:
    - build-discarder:
        artifact-days-to-keep: -1
        artifact-num-to-keep: -1
        days-to-keep: -1
        num-to-keep: 10
    - raw:
        xml: |
          <hudson.plugins.disk__usage.DiskUsageProperty plugin="disk-usage@0.28" />
    - raw:
        xml: |
          <com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty plugin="gitlab-plugin@1.5.2">
          <gitLabConnection />
          </com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty>
    - raw:
        xml: |
          <org.jenkinsci.plugins.ZMQEventPublisher.HudsonNotificationProperty plugin="zmq-event-publisher@0.0.5">
          <enabled>false</enabled>
          </org.jenkinsci.plugins.ZMQEventPublisher.HudsonNotificationProperty>
    - raw:
        xml: |
          <com.synopsys.arc.jenkins.plugins.ownership.jobs.JobOwnerJobProperty plugin="ownership@0.10.0">
          <ownership>
          <ownershipEnabled>true</ownershipEnabled>
          <primaryOwnerId>nelluri</primaryOwnerId>
          <coownersIds class="sorted-set" />
          </ownership>
          </com.synopsys.arc.jenkins.plugins.ownership.jobs.JobOwnerJobProperty>
    - raw:
        xml: |
          <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.25">
          <autoRebuild>false</autoRebuild>
          <rebuildDisabled>false</rebuildDisabled>
          </com.sonyericsson.rebuild.RebuildSettings>
    - raw:
        xml: |
          <hudson.plugins.throttleconcurrents.ThrottleJobProperty plugin="throttle-concurrents@2.0.1">
          <maxConcurrentPerNode>0</maxConcurrentPerNode>
          <maxConcurrentTotal>0</maxConcurrentTotal>
          <categories class="java.util.concurrent.CopyOnWriteArrayList" />
          <throttleEnabled>false</throttleEnabled>
          <throttleOption>project</throttleOption>
          <limitOneJobWithMatchingParams>false</limitOneJobWithMatchingParams>
          <paramsToUseForLimit />
          </hudson.plugins.throttleconcurrents.ThrottleJobProperty>
    publishers: []
    scm:
    - git:
        basedir: private
        branches:
        - '*/master'
        credentials-id: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
        url: XXXXXXXXXXXXXXXXXXXXXXX
    triggers: []
    wrappers:
    - ansicolor:
        colormap: xterm
